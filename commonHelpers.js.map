{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from 'axios';\n\nlet currentQuery = '';\nlet currentPage = 1;\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.load-more')\nloader.style.display = 'none';\nconst BASE_URL = 'https://pixabay.com/api/';\nlet lightbox;\nform.addEventListener('submit', e => {\n  e.preventDefault();\n  loader.style.display = 'block';\n    const queryInput = e.target.elements.query.value.trim();\n    if (queryInput.length < 3) {\n         iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search query with at least 3 characters.',\n      position: 'topRight',\n         });\n       loader.style.display = 'none';\n    return;\n  }\n  loadMoreButton.style.display = 'none';\n  currentQuery = queryInput;\n  currentPage = 1;\n    gallery.innerHTML = '';\n  \n    getImage(currentQuery, currentPage).then(({ hits }) => {\n        if (hits.length > 0) {\n            const galleryHTML = hits.map(createGallery).join('');\n            gallery.innerHTML = galleryHTML;\n            \n            lightbox = new SimpleLightbox(`.gallery-link`);\n          lightbox.refresh();\n          loader.style.display = 'none';\n          loadMoreButton.style.display = 'block';\n          \n        }else {\n            iziToast.info({\n                title: 'Info',\n                message: 'Unfortunately, no images were found for your search. Please try again!',\n                position: 'topRight',\n            });\n           loadMoreButton.style.display = 'none';\n        }\n    })\n  form.reset();\n  \n})\n\n\nloadMoreButton.addEventListener('click', async () => {\n  loader.style.display = 'block';\n  currentPage += 1;\n  const { hits } = await getImage(currentQuery, currentPage);\n  const galleryHTML = hits.map(createGallery).join('');\n  gallery.insertAdjacentHTML('beforeend', galleryHTML);\n  lightbox.refresh();\n  loader.style.display = 'none';\n  if (hits.length === 0) {\n    loadMoreButton.style.display = 'none';\n    iziToast.info({\n      title: 'Info',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n  }\n  window.scrollTo({\n    top: document.body.scrollHeight,\n    behavior: 'smooth',\n  });\n});\nasync function getImage(q,page = 1) {\n    const PARAMS = {\n        key: '42392659-652aaf55959599f1a779f61b5',\n        q,\n        image_type: 'photo',\n        orientation: 'horizontal',\n      safeSearch: true,\n         per_page: 15,\n        page,\n    }\n    const url = BASE_URL + '?' + new URLSearchParams(PARAMS).toString();\n    try {\n        const res = await axios.get(url);\n        if (res.status !== 200) {\n            throw new Error('Network response was not ok');\n        }\n        return res.data;\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'There seems to be a problem with your internet connection. Please check and try again.',\n            position: 'topRight',\n        });\n        throw error;\n    } finally {\n        loader.style.display = 'none';\n    }\n}\nfunction createGallery({\n  largeImageURL,\n  tags,\n  webformatURL,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `\n    <a href=\"${largeImageURL}\" class=\"gallery-link\">\n      <figure>\n        <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\">\n        <figcaption class=\"gallery__figcaption\">\n          <div class=\"image-item\">Likes <span class=\"image-elem\">${likes}</span></div>\n          <div class=\"image-item\">Views <span class=\"image-elem\">${views}</span></div>\n          <div class=\"image-item\">Comments <span class=\"image-elem\">${comments}</span></div>\n          <div class=\"image-item\">Downloads <span class=\"image-elem\">${downloads}</span></div>\n        </figcaption>\n      </figure>\n    </a>\n  `;\n}"],"names":["currentQuery","currentPage","form","gallery","loader","loadMoreButton","BASE_URL","lightbox","e","queryInput","iziToast","getImage","hits","galleryHTML","createGallery","SimpleLightbox","q","page","PARAMS","url","res","axios","error","largeImageURL","tags","webformatURL","likes","views","comments","downloads"],"mappings":"owBAUA,IAAIA,EAAe,GACfC,EAAc,EAClB,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,YAAY,EAC1DD,EAAO,MAAM,QAAU,OACvB,MAAME,EAAW,2BACjB,IAAIC,EACJL,EAAK,iBAAiB,SAAUM,GAAK,CACnCA,EAAE,eAAc,EAChBJ,EAAO,MAAM,QAAU,QACrB,MAAMK,EAAaD,EAAE,OAAO,SAAS,MAAM,MAAM,OACjD,GAAIC,EAAW,OAAS,EAAG,CACtBC,EAAS,QAAQ,CACpB,MAAO,UACP,QAAS,0DACT,SAAU,UAChB,CAAU,EACHN,EAAO,MAAM,QAAU,OAC1B,MACD,CACDC,EAAe,MAAM,QAAU,OAC/BL,EAAeS,EACfR,EAAc,EACZE,EAAQ,UAAY,GAEpBQ,EAASX,EAAcC,CAAW,EAAE,KAAK,CAAC,CAAE,KAAAW,KAAW,CACnD,GAAIA,EAAK,OAAS,EAAG,CACjB,MAAMC,EAAcD,EAAK,IAAIE,CAAa,EAAE,KAAK,EAAE,EACnDX,EAAQ,UAAYU,EAEpBN,EAAW,IAAIQ,EAAe,eAAe,EAC/CR,EAAS,QAAO,EAChBH,EAAO,MAAM,QAAU,OACvBC,EAAe,MAAM,QAAU,OAEzC,MACYK,EAAS,KAAK,CACV,MAAO,OACP,QAAS,yEACT,SAAU,UAC1B,CAAa,EACFL,EAAe,MAAM,QAAU,MAE1C,CAAK,EACHH,EAAK,MAAK,CAEZ,CAAC,EAGDG,EAAe,iBAAiB,QAAS,SAAY,CACnDD,EAAO,MAAM,QAAU,QACvBH,GAAe,EACf,KAAM,CAAE,KAAAW,CAAI,EAAK,MAAMD,EAASX,EAAcC,CAAW,EACnDY,EAAcD,EAAK,IAAIE,CAAa,EAAE,KAAK,EAAE,EACnDX,EAAQ,mBAAmB,YAAaU,CAAW,EACnDN,EAAS,QAAO,EAChBH,EAAO,MAAM,QAAU,OACnBQ,EAAK,SAAW,IAClBP,EAAe,MAAM,QAAU,OAC/BK,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,6DACT,SAAU,UAChB,CAAK,GAEH,OAAO,SAAS,CACd,IAAK,SAAS,KAAK,aACnB,SAAU,QACd,CAAG,CACH,CAAC,EACD,eAAeC,EAASK,EAAEC,EAAO,EAAG,CAChC,MAAMC,EAAS,CACX,IAAK,qCACL,EAAAF,EACA,WAAY,QACZ,YAAa,aACf,WAAY,GACT,SAAU,GACX,KAAAC,CACH,EACKE,EAAMb,EAAW,IAAM,IAAI,gBAAgBY,CAAM,EAAE,WACzD,GAAI,CACA,MAAME,EAAM,MAAMC,EAAM,IAAIF,CAAG,EAC/B,GAAIC,EAAI,SAAW,IACf,MAAM,IAAI,MAAM,6BAA6B,EAEjD,OAAOA,EAAI,IACd,OAAQE,EAAO,CACZ,MAAAZ,EAAS,MAAM,CACX,MAAO,QACP,QAAS,yFACT,SAAU,UACtB,CAAS,EACKY,CACd,QAAc,CACNlB,EAAO,MAAM,QAAU,MAC1B,CACL,CACA,SAASU,EAAc,CACrB,cAAAS,EACA,KAAAC,EACA,aAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACD,MAAO;AAAA,eACMN,CAAa;AAAA;AAAA,oBAERE,CAAY,UAAUD,CAAI;AAAA;AAAA,mEAEqBE,CAAK;AAAA,mEACLC,CAAK;AAAA,sEACFC,CAAQ;AAAA,uEACPC,CAAS;AAAA;AAAA;AAAA;AAAA,GAKhF"}